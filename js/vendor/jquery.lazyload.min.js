$.fn.smartBackgroundImage = function(url){
	var t = this;
	//create an img so the browser will download the image:
	$('<img />')
		.attr('src', url)
		.load(function(){ //attach onload to set background-image
			t.each(function(){ 

				$(this)
					.removeAttr("data-bg")
					.removeClass("lazy-hidden")
					.css('background-image', "url('"+url+"')" )
			});
		});

	return this;
 }